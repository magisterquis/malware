package main

/*
 * cmdcd.go
 * Change directories
 * By J. Stuart McMurray
 * Created 20160725
 * Last Modified 20160725
 */

import (
	"fmt"
	"os"
)

/* cd changes the rat's directory */
func init() {
	RegisterCommand(cd_rs, &Command{
		Do: func(s *Server, replyto, args string) error {
			/* Try to change to the directory */
			if err := os.Chdir(args); nil != err {
				return err
			}
			/* Print back the directory we're now in */
			wd, err := os.Getwd()
			if nil != err {
				wd = fmt.Sprintf(_v___v__rs, wd, err)
			}
			return s.SendMsg(replyto, []byte(fmt.Sprintf(
				Working_directory_now__q_rs,
				wd,
			)))
		},
		Help: path_rs,
	})
}
