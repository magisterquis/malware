package main

import (
	"bufio"
	"log"
	"os"
)

/*
 * stdin.go
 * Send lines from stdin to the sender
 * By J. Stuart McMurray
 * Created 20160227
 * Last Modified 20160227
 */

/* stdin reads lines from stdin and sends them out on c, prefixed with the
magic flag. */
func stdin(c chan<- string, mf string) {
	defer close(c)
	scanner := bufio.NewScanner(os.Stdin)
	log.Printf("Ready.")
	for scanner.Scan() {
		c <- mf + scanner.Text()
	}
	if err := scanner.Err(); err != nil {
		log.Fatalf("Read error: %v", err)
	}
}
